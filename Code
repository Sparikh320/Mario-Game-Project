# Anthony Esquivel afe2xd, Sahil Parikh sp4qf
import pygame
import gamebox
camera = gamebox.Camera(800, 600)
game_on = False

borders = [gamebox.from_color(400, 20, "black", 8000, 40),
           gamebox.from_color(400, 575, "green", 800, 50),
           gamebox.from_color(1300, 575, "green", 800, 50),
           gamebox.from_color(500, 450, "brown", 50, 50)]


mario = gamebox.from_color(100, 530, "red", 30, 40)
mario.speedx = 0
position = 400
def tick(keys):

    global game_on
    global position
    camera.clear("lightblue")
    if not game_on:
        camera.draw(gamebox.from_text(300, 100, "Press space to start", 40, "Red"))
    if pygame.K_SPACE in keys:
        game_on = True
        
# player movement
    if game_on:
        if pygame.K_UP in keys:
            for border in borders:# Mario can only jump up if he is not in the air already
                if mario.touches(border):
                    mario.speedy = -20
        if pygame.K_RIGHT in keys:
            mario.x += 10
        if pygame.K_LEFT in keys:
            mario.x += -10
    mario.move_speed()
    
    # Screen Movement
    if mario.x > position:
        camera.center = [mario.x, 300]
        position = mario.x
     if mario.x < position - 400:
        mario.x = position - 400

    for border in borders:
        camera.draw(border)
        if not mario.touches(border):
            mario.speedy += 0.75 #whenever mario is in the air he gains downward velocity
        else:
            # mario.speedy = -0.75
            mario.move_to_stop_overlapping(border)

    camera.draw(mario)
    camera.display()


gamebox.timer_loop(30, tick)
